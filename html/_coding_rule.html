<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>SDXFrameWork: SDXコーディング規則</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SDXFrameWork
   &#160;<span id="projectnumber">0.09</span>
   </div>
   <div id="projectbrief">SDXFrameWork</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SDXコーディング規則 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><br />
</p>
<h1><a class="anchor" id="はじめに"></a>
はじめに</h1>
<p>普通にコードを書いた後、コード分析のために作成した資料です。<br />
同じような事をしてるのにやたらバラバラな事をしていたり、よく考えると不自然な書き方をしているかを分析するために書いています。<br />
<br />
　数ページの規約を守れば誰でも分かりやすいコードが書けるなんてことはないです。<br />
例えば、「yes/noを表す変数はintで無くboolを使おう｣とか｢NULLじゃなくnullptr使おう｣とか常識的な事は規約に書く意味は薄いです。<br />
こう言う事を書いても無駄に規約が長くなって読むのが面倒になるだけです<br />
<br />
　なので本規約は「複数のコーディングスタイルがありどちらも大した差がないので、どちらかに統一する｣事が主眼に置いています。<br />
例えば、インデントを4か8にするかTabにするか空白にするかは大した差が無いかもしれませんが、少なくとも同じプロジェクト内ではどちらかに統一した方が良さそうと言った具合です<br />
ついでに言うとスタイルを統一してもそこまで可読性は上がりません、レビューするのが一番大事です<br />
<br />
　また特殊な事情で制限をかけている事が少しあるので、その辺りの注意等も書いています<br />
<br />
<b>基本方針</b><br />
①C++初学者のために初歩的な構文だけ使うとか考えない<br />
②仮引数以外の日本語識別子は基本的に避ける<br />
③規約に問題があれば見直しを行う<br />
<br />
<b>適用範囲</b><br />
 SDXのみ対象です。<br />
 派生ライブラリやサンプルコードは命名規則に準拠せず、英語以外の識別子を必要な時に使います。<br />
 また、こう言う方針で書いてると言うだけなので、プルリクエストする時にここの規則に合わせる必要もないです<br />
もしプルリクエストが来たら、規則から外れ過ぎないように修正するか、規則を見直します<br />
またレビューを厳密に行っていないので、多少は方針に従っていないコードがあります<br />
<br />
<b>参考</b><br />
以下のページや書籍等を参考にしたり反面教師にしたりしています<br />
<a href="http://msdn.microsoft.com/ja-jp/library/ms229042(v=vs.100).aspx" target="_blank"><b>クラスライブラリ開発のデザインガイドライン</b></a><br />
<a href="http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml" target="_blank"><b>Google C++スタイルガイド</b></a><br />
Effective C++（書籍） </p>
<h1><a class="anchor" id="命名規則"></a>
命名規則</h1>
<p><b>基本</b><br />
 無理の無い範囲でわかりやすくする。一般的ではない省略は行わない。<br />
InitializeをInitとしたりしているが、極力さけたいので今の内に変更するかもしれない<br />
<br />
<b>ファイル名</b><br />
 ヘッダーファイル名は、クラス名と同じにし拡張子は.hにし.hppにしない。<br />
<br />
<b>仮引数</b><br />
　基本的に日本語にします。<br />
Unicode範囲内の特殊な記号は使いません<br />
句読点などの規格非準拠な文字は使いません<br />
<br />
<b>仮引数以外の識別子</b><br />
 それ以外は半角英数とアンダーバーで命名します<br />
ローマ字表記は避け、英単語を元に命名します<br />
<br />
<b>大文字と小文字の使い分け</b><br />
 先頭と単語の区切りを大文字にするのをPascal形式と言い、先頭を小文字にし単語の区切りを大文字にするのをCamel形式と言います。<br />
<br />
クラス、構造体、メンバー関数、列挙体、列挙子、ローカルで無い定数はPascal形式<br />
<br />
ローカル変数とメンバー変数はCamel形式<br />
<br />
マクロはすべて大文字にして_で単語をつなぐ。ただし、マクロは必要な時だけ使います。<br />
名前空間は全て大文字にし_で単語を繋ぎます。<br />
<br />
<b>慣用的な命名</b><br />
ループカウンタはa,b,cの順で一文字の変数を用いる、3重以上のループは書いていない<br />
範囲ベースのループは for(auto it: hoge)とかfor(auto &amp; it:hoge)とかfor(const auto &amp;int :hoge)とかにする<br />
テンプレート仮引数の前にはTを付ける<br />
<br />
</p>
<h1><a class="anchor" id="スタイルの統一"></a>
スタイルの統一</h1>
<p><b>ヘッダーファイル</b><br />
基本的にはヘッダーファイルで実装と宣言をする。<br />
実装が不可能な場合は実装と宣言を分ける<br />
前方宣言で十分な場合、無闇にincludeしない<br />
<br />
<b>可変数引数</b><br />
可変数引数は使わず可変テンプレートを使います。<br />
抽象クラスのメンバー関数に可変数引数が必要な場合は、可変テンプレートで初期化可能な型を引数にします<br />
文字列の場合はVariadicStreamを使います<br />
<br />
<b>インライン関数</b><br />
inlineキーワードは使わず、コンパイラの判断にまかせたいのですが、<br />
明示的に書かないとinline化してくれない事があったので必要なら使います。<br />
<br />
<b>インクルードガード</b><br />
使いたいコンパイラが全て #pragma onceを実装しているため。<br />
#defineによるインクルードガードではなく、#pragma onceを使う。<br />
<br />
<b>キャスト</b><br />
int,float,doubleの相互変換はcスタイルキャスト可。<br />
それ以外はc++スタイルのキャストを使う。<br />
<br />
</p>
<h1><a class="anchor" id="その他"></a>
その他</h1>
<p><b>著作権表示</b><br />
コードの先頭には著作権表示をコメントする<br />
©SDXFramework <a href="http://sourceforge.jp/projects/dxframework/">http://sourceforge.jp/projects/dxframework/</a> <br />
　ライブラリのコードなのかユーザーが書いたコードなのか見分けをつけやすくするのと、<br />
権利を主張している事を明示的にするため必要です<br />
<br />
機種依存文字(というかフォント依存文字)の©を使うのは、MSVCでUTF-8で確実に保存するため<br />
<b>名前空間</b><br />
グローバル変数は作らず、少なくともSDX名前空間に入れる。<br />
using namespace std;は使わない<br />
<br />
<b>仮想クラス</b><br />
純粋仮想関数を１つ以上持つクラスは、先頭にIをつける。<br />
メンバー変数を持っていてもIを付ける<br />
<br />
<b>Get、Set</b><br />
代入か取得の片方しかしないメンバー変数はプライベートにし、Get関数とSet関数を作る。<br />
GetとSetの両方をしたい場合はpublicにしても良い<br />
<br />
<b>宣言の順番</b><br />
まずprivate、次にprotected、そしてpublic<br />
変数の宣言ののち関数を宣言する<br />
そんなに重要ではない<br />
<br />
<b>入出力ストリーム、文字列ストリーム</b><br />
ライブラリ内部では使う、利用者は使用せずにライブラリを使えるようにする。<br />
<br />
<b>前置インクリメント</b><br />
最適化されてもされなくても速度差は殆ど無いが<br />
デバッグビルドもあるので基本的に前置インクリメントを使う<br />
<br />
<b>float型</b><br />
基本的に使わず、doubleにしている<br />
<br />
<br />
<b>Boost</b><br />
標準ライブラリを優先して使い、必要な場合はboostを使う。<br />
<br />
<b>C++11/14/1z</b><br />
VisualStudio最新版とclang3.3で対応している範囲のみ使用可能。<br />
<br />
<b>コメント</b><br />
ソースコード管理システムに登録されるような事は書かない。<br />
仮引数と戻り値用のドキュメントコメントは使わない<br />
関数とクラスには一行以上の説明を必ず付ける<br />
クラスに対してはテストコードをサンプルコードとして付ける<br />
変数と列挙子は必要なら一行で説明をつける。コメントなしで分かる変数名にするのが良い。<br />
コメントアウトしたコードは速やかに削除する<br />
<br />
<b>実装コメント</b><br />
分かりにくい場合、関数内部に説明のコメントをつける。<br />
テスト兼サンプルコードについては詳細に付けて良い<br />
<br />
<b>インデント、スペースとタブ</b><br />
タブ幅は4とし、半角スペースを使う<br />
<br />
<b>括弧</b><br />
括弧と括弧閉じは同じ高さ、あるいは同じ行にする。例外としてelseを使う場合は以下の書き方をする事もある。 </p><div class="fragment"><div class="line"><span class="comment">//ダメ</span></div>
<div class="line"><span class="keywordflow">if</span>( x == 1 ){</div>
<div class="line">    func();</div>
<div class="line">}</div>
<div class="line"><span class="comment">//良い</span></div>
<div class="line"><span class="keywordflow">if</span>( x == 1 )</div>
<div class="line">{</div>
<div class="line">    func();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//良い</span></div>
<div class="line"><span class="keywordflow">if</span>( x == 1 )</div>
<div class="line">{</div>
<div class="line">    func();</div>
<div class="line">}<span class="keywordflow">else</span>{</div>
<div class="line">    func2();</div>
<div class="line">}</div>
</div><!-- fragment --><p> <br />
</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Sep 20 2014 17:17:56 for SDXFrameWork by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
